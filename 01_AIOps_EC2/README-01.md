
# 실습 1. AIOps for EC2 통계 및 비용 분석후 리포트 생성

## 1) 과정내용 - 설명

> 실습을 진행하시는 도중 Amazon Q dev CLI가 의도하지 않게 동작하는 경우가 발생할 수 있습니다. 그 때에는 안내된 과정 외에도 추가로 요청하시어 목표에 도달할 수 있도록 직접 요청을 수행해보시기 바랍니다.

 
📢 이 과정은 Q CLI 를 이용하여 EC2 사용 통계 및 비용 통계를 만들도록 합니다. 


## 2) 진행순서 - 실습 (통계생성)

* 시작전에 가설이나,예측은 제외하도록 지정합니다.
```
질문에 대한 정보 제공시에, 실제 데이터를 확인한 정보만을 기초로 데이터를 만들고, 추축이나 가설은 제외해.
확인가능한 여러 접근방법을 이용해서 데이터를 확인하고, 불가능한 경우엔 공백으로 표시해. 스크립트는 작성하지 말고 만들어줘.
```


* AWS EC2 Console 에서는 제공되지 않는 IMDS 활성 비활성에 대한 상태값을 확인하여 제공하도록 시도해 봅니다. 
```
us-east-1 리전의 인스턴스들의 IMDS 활성 비활성 상태를 확인하여 텍스트 테이블 형태의 보고서로 제공해줘. 스크립트는 작성하지 말고 만들어줘
```


* OS 레벨의 특정 상태 및 정보를 확인하여 통계데이터로 만드는 것을 시도해 봅니다. 

```
us-east-1 리전의 인스턴스들의 목록을 확인하고, 각 인스턴스의 OS 버젼, 커널버젼, sshd 버젼, bash 버젼을 확인하여 텍스트 테이블 통계로 만들어줘.
실제 데이터를 확인한 정보만을 기초로 만들어줘. 확인가능한 여러 접근방법을 이용해서 진행해줘.
```

```
us-east-1 리전의 인스턴스들의 목록을 확인하고, 각 인스턴스의 OS 에 있는 사용자 계정의 목록을 확인하고 목록을 만들고 로그인 가능한 것과 아닌것을 나누어 표시해줘
```

* 현재가지 조사된 자료를 HTML 형태로 보고서를 작용을 요청시도 해봅니다.
```
지금까지 분석한 내용을 정리하고, 데이터를 그래프와 함께 HTML 문서로 만들어줘
```


* 만들어진 문서를 확인할 수 있도록 http 서버를 구성하도록 지시합니다. 
```
외부에서 접근가능하도록 http 서버에 올려줘
```

* 인스턴스 비용에 인스턴스 타입이 적정한지 확인하도록 요청합니다.
```
us-east-1 리전의 인스턴스들의 목록을 확인하고, 각 인스턴스의 타입이 적절한지 메트릭 사용량을 확인한 후 , 분석 결과를 텍스트 테이블로 만들어줘
```

* 추가로 더해진 분석 데이터를 기존 HTML 에 추가하도록 지시합니다.
```
추가 분석한 데이터를, 기존 데이터와 합쳐서 , 현재의 html 에 추가해줘
```

## 3) 진행순서 - 실습 (비용생성)

* 인스턴스 비용에 대한 기초 정보를 만들기 위해서 아래와 같이 지시합니다.
```
현재 ap-northeast-2  인스턴스 목록에 대해서 생성일(시간제외), 타입, 실행중상태, 비용, 1시간, 일, 월(30일) 을 텍스트 테이블로 만들어줘.
순서는 날짜 별로 해줘. 인스턴스 수량 목록이 누락되지 않게 모두 포함해줘
```

* 이제 RI 를 통한 연간 비용을 계산하기 위해서 데이터를 생성을 요청합니다.
```
기존 결과에서 RI 를 1,2,3 년  기준으로 비용 변화를 비교해줘. IR 1,2,3 기준을 함께 볼 수 있도록 옆에 같이  표시해줘
```

* 만들어진 데이터를 기초로 웹 게시/보고용 HTML 페이지를 만들도록 지시 합니다.
```
지금까지 조사된 결과를, html 로 만들어서 웹으로 볼수 있도록 해주고, 비교 그래프로 만들어줘
```


----
아래 화면은 제가 테스트 작성한 예시 화면 입니다. 

![ec2-cost-calc.img](./data/ec2-cost-calc.png)
